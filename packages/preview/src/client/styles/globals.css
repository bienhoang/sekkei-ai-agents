@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  --font-sans: 'Noto Sans JP', 'Hiragino Sans', 'Yu Gothic UI', sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', ui-monospace, monospace;
  --leading-relaxed: 1.8;
}

/* ── Scrollbar ── */
* {
  scrollbar-width: thin;
  scrollbar-color: theme(colors.zinc.700) transparent;
}

/* ── Prose overrides for JP documents ── */
.prose { line-height: var(--leading-relaxed); }

/* ── Tiptap core ── */
.ProseMirror { outline: none; }
.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  color: theme(colors.zinc.600);
  pointer-events: none;
  float: left;
  height: 0;
}

/* ── Table styling ── */
.ProseMirror table.tiptap-table,
.ProseMirror table {
  border-collapse: collapse;
  width: 100%;
  margin: 1rem 0;
  font-size: 0.875rem;
}

.ProseMirror table th,
.ProseMirror table td {
  border: 1px solid theme(colors.zinc.700);
  padding: 0.5rem 0.75rem;
  text-align: left;
  vertical-align: top;
}

.ProseMirror table th {
  background: theme(colors.zinc.800);
  font-weight: 600;
  color: theme(colors.zinc.200);
  font-size: 0.8rem;
  text-transform: none;
}

.ProseMirror table td {
  background: theme(colors.zinc.900);
  color: theme(colors.zinc.300);
}

.ProseMirror table tr:hover td {
  background: theme(colors.zinc.800/50);
}

/* Selected cell highlight */
.ProseMirror table .selectedCell {
  background: theme(colors.indigo.900/30);
  border-color: theme(colors.indigo.500/50);
}

/* ── Code block styling ── */
.code-block {
  background: #1a1b26;
  border: 1px solid theme(colors.zinc.800);
  padding: 1rem 1.25rem;
  position: relative;
  font-family: var(--font-mono);
}

.code-block code {
  font-family: inherit;
  font-size: 0.8125rem;
  line-height: 1.7;
}

.code-lang-badge {
  position: absolute;
  top: 0.375rem;
  right: 0.5rem;
  font-size: 0.625rem;
  color: theme(colors.zinc.500);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  pointer-events: none;
  font-family: var(--font-mono);
}

/* ── Syntax highlighting (lowlight / hljs classes) ── */
.hljs-comment,
.hljs-quote { color: #636da6; font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-type { color: #bb9af7; }

.hljs-string,
.hljs-attr,
.hljs-addition { color: #9ece6a; }

.hljs-number,
.hljs-literal { color: #ff9e64; }

.hljs-built_in,
.hljs-builtin-name { color: #7dcfff; }

.hljs-function .hljs-title,
.hljs-title.function_ { color: #7aa2f7; }

.hljs-variable,
.hljs-template-variable { color: #c0caf5; }

.hljs-name,
.hljs-tag { color: #f7768e; }

.hljs-attribute { color: #bb9af7; }

.hljs-regexp { color: #b4f9f8; }

.hljs-symbol,
.hljs-bullet { color: #73daca; }

.hljs-meta { color: #636da6; }

.hljs-deletion { color: #f7768e; }

.hljs-section,
.hljs-title { color: #7aa2f7; font-weight: 600; }

.hljs-emphasis { font-style: italic; }
.hljs-strong { font-weight: 700; }

/* ── Task list (checkboxes) ── */
.ProseMirror ul[data-type="taskList"] {
  list-style: none;
  padding-left: 0;
}

.ProseMirror ul[data-type="taskList"] li {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  margin: 0.25rem 0;
}

.ProseMirror ul[data-type="taskList"] li > label {
  flex-shrink: 0;
  margin-top: 0.25rem;
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
  appearance: none;
  width: 1rem;
  height: 1rem;
  border: 2px solid theme(colors.zinc.600);
  border-radius: 0.25rem;
  background: transparent;
  cursor: pointer;
  transition: all 0.15s;
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:checked {
  background: theme(colors.indigo.600);
  border-color: theme(colors.indigo.600);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
}

.ProseMirror ul[data-type="taskList"] li[data-checked="true"] > div > p {
  text-decoration: line-through;
  color: theme(colors.zinc.500);
}

/* ── Highlight ── */
.ProseMirror mark {
  background: theme(colors.yellow.500/30);
  color: theme(colors.yellow.200);
  padding: 0.1em 0.2em;
  border-radius: 0.15em;
}

/* ── Subscript / Superscript ── */
.ProseMirror sub { font-size: 0.75em; }
.ProseMirror sup { font-size: 0.75em; }

/* ── Images ── */
.ProseMirror img {
  max-width: 100%;
  height: auto;
  border-radius: 0.5rem;
  border: 1px solid theme(colors.zinc.700/50);
}

/* ── Mermaid ── */
.mermaid-wrapper {
  margin: 1rem 0;
}

.mermaid-diagram svg {
  max-width: 100%;
  height: auto;
}

/* ── Screen reader only (for hidden mermaid source) ── */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
